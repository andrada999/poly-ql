package nl.uva.sc;

import java.io.BufferedReader;
import java.io.File;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

public class BookParser {

    private final File mBookFile;

    private final List<BookParserSubscriber> mSubscriber = new ArrayList<>();

    public BookParser(final File bookFile) {
        mBookFile = bookFile;
    }

    public void parse() {
        BufferedReader reader = new BufferedReader(new InputStreamReader(mBookFile, "UTF-8"));
        try {
            while (true) {
                String line = reader.readLine();
                if (line == null) break;
                String[] fields = line.split(",");
                // process fields here
            }
        } finally {
            reader.close();
        }
    }

    public boolean subscribe(final BookParserSubscriber subscriber) {
        return mSubscriber.add(subscriber);
    }

    public boolean unsubscribe(final BookParserSubscriber subscriber) {
        return mSubscriber.remove(subscriber);
    }

}
